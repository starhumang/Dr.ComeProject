<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{hospital/hospitalLayout}">

<head>
<meta charset="UTF-8">
<title>patientList</title>
<style>
.head_info {
	display: flex;
	justify-content: space-between;
	margin-top: 30px;
}

.info-box {
	display: flex;
	justify-content: center;
}

#p-info {
	text-align: center;
	margin-bottom: 30px;
	background-color: #DEE0E3;
}

.noticeBtn {
	display: flex;
	justify-content: space-between;
}
.ansTitle {
	margin: 2.0rem 0;
}
</style>
</head>

<body>
	<div layout:fragment="content">
		<div class="container-fluid">
			<div class="head_info">
				<h4 th:text="${hospitalSel.hospitalName}"></h4>
				<p>
					<i class="fas fa-fw fa-calendar"></i> 현재날짜 : <span
						th:text="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}"></span>
				</p>
			</div>
			<p>QnA Detail</p>

			<!-- qna 단건 -->
				<div th:if="${qnaInfo}">
				    <table class="table table-bordered">
				        <thead>
				            <tr>
				                <th class="text-center table-light">번호</th>
				                <td th:text="${qnaInfo.qnaNo}" class="text-center"></td>
				                <th class="text-center table-light">작성일</th>
				                <td th:text="${#dates.format(qnaInfo.wdate, 'yyyy-MM-dd')}"
				                    class="text-center"></td>
				                <th class="text-center table-light">수정일</th>
				                <td th:if="${qnaInfo['udate'] != null}"
				                    th:text="${#dates.format(qnaInfo['udate'], 'yyyy-MM-dd')}"></td>
				                <td th:if="${qnaInfo['udate'] == null}">-</td>
				                <th class="text-center table-light">답변상태</th>
				                <td th:text="${qnaInfo.ansStatus}"></td>
				            </tr>
				            <tr>
				                <th class="text-center table-light">제목</th>
				                <td th:text="${qnaInfo.title}" colspan="8"></td>
				            </tr>
				        </thead>
				        <tbody>
				            <tr>
				                <td th:text="${qnaInfo.content}" colspan="8" class="text-left"
				                    valign="top" height="200"><pre
				                        style="white-space: pre-wrap; border: none;">
				                </pre></td>
				            </tr>
				            <!-- qnaAtt 리스트를 순회하며 각 첨부 파일 정보를 표시 -->
				            <tr>
				                <th>첨부파일</th>
				                <td  colspan="7">
				                    <span th:each="attach : ${qnaAtt}" th:if="${attach.qnaNo == qnaInfo.qnaNo}" th:text="${attach.fileName}"></span>
				                </td>
				            </tr>
				        </tbody>
				    </table>
				</div>
				
				<!-- ans 단건 -->
				<div th:if="${ansInfo}">
					<div class="ansTitle">
						<h5 class="m-0 font-weight-bold text-secondary">
							<i class="fas fa-fw fa-comment"></i>답변
						</h5>
					</div>
				    <table class="table table-bordered">
				        <thead>
				            <tr>
				                <th class="text-center table-light">작성일</th>
				                <td th:text="${#dates.format(ansInfo.wdate, 'yyyy-MM-dd')}"
				                    class="text-center"></td>
				                <th class="text-center table-light">수정일</th>
				                <td th:if="${ansInfo['udate'] != null}"
				                    th:text="${#dates.format(ansInfo['udate'], 'yyyy-MM-dd')}"></td>
				                <td th:if="${ansInfo['udate'] == null}">-</td>
				            </tr>
				        </thead>
				        <tbody>
				            <tr>
				                <td th:text="${ansInfo.content}" colspan="8" class="text-left"
				                    valign="top" height="200"><pre
				                        style="white-space: pre-wrap; border: none;">
				                </pre></td>
				            </tr>
				            <tr>
				                <th>첨부파일</th>
				                <td  colspan="3">
				                    <span th:each="attach : ${qnaAtt}" th:if="${attach.qnaNo == ansInfo.qnaNo}" th:text="${attach.fileName}"></span>
				                </td>
				            </tr>
				        </tbody>
				    </table>
				</div>
					<div class="noticeBtn">
						<!-- 목록버튼 -->
						<div style="text-align: center;">
							<a th:href="@{/hospital/qnaList}" class="btn btn-dark">목록으로</a>
						</div>
						<div style="text-align: center;">
							<a th:href="@{/hospital/qnaAnsForm(qnaNo=${qnaInfo.qnaNo})}" class="btn btn-warning">답변달기</a>
						</div>
					</div>
			</div>

		</div>
	</div>
</body>
</html>