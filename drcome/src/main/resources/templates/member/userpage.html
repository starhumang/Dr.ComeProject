<!DOCTYPE html>
<html
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}"
>
	<head>
		<meta charset="UTF-8" />
		<script type="text/javascript">
			function errAlert(content) {
				Swal.fire({
					icon: 'error',
					text: content,
				});
			}
		</script>
	</head>
	<body>
		<div layout:fragment="content">
			<p>마아아이이이페에에에이이이지이이이</p>
			<!-- <p th:text="${profile}"></p> -->
			<p id="userId" th:text="${session.userId}"></p>
			<!-- <div><img th:src="@{/img/{img}(img= ${profile.identification})}" width="300px" height="300px" /></div> -->
			<p>전체코드</p>
			<!-- <p th:text="${application.detailCode}"></p> -->
			<p>개별코드</p>
			<!-- [[${application.detailCode_a}]] -->

			<h1>WebSocket Test</h1>
			<button onclick="connectWebSocket()">Connect WebSocket</button>
			<button onclick="sendMessage()">Send Message</button>
			<div id="messages"></div>

			<script>
				function sendMessage() {
					try {
						if (socket && socket.readyState === WebSocket.OPEN) {
							// 서버로 메시지 전송
							const message = '문자 전송';
							socket.send(message);
							console.log('보낸 메시지: ' + message);
						} else {
							console.error('WebSocket 연결이 열려있지 않습니다.');
						}
					} catch (error) {
						console.error('WebSocket 메시지 전송 에러:', error);
					}
				}

				function displayMessage(message) {
					// 받은 메시지를 화면에 표시
					const messagesDiv = document.getElementById('messages');
					const messageDiv = document.createElement('div');
					messageDiv.textContent = message;
					messagesDiv.appendChild(messageDiv);
				}
			</script>
		</div>
	</body>
</html>
