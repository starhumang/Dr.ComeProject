<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8" />
<title>Dr.Come</title>
<!-- 좌표로 주소찾는 라이브러리 불러오기 -->
<script type="text/javascript" th:src="@{//dapi.kakao.com/v2/maps/sdk.js?appkey=7be6b1f8b5b642b5d341f732b8dc384e&libraries=services}"></script>
<!-- 주소검색 다음api -->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
	<div layout:fragment="content">
		<p>메인페이지</p>


		<!-- Header Start -->
		<div class="container-fluid bg-primary py-5 mb-5 page-header"
			style="height: 400px;">
			<div class="container py-5">
				<div class="row justify-content-center">
					<div class="col-lg-10 text-center" style="padding-top:40px;">
						<h1 class="display-3 text-white animated slideInDown"
							style="font-size: 40px;">어떤 병원을 찾고 계신가요?</h1>

						<form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3"
							role="search" style="padding-left: 170px; margin-top: 40px;">


							<!-- 검색창 -->
							<input type="search"
								class="form-control form-control-dark text-bg-dark"
								placeholder="찾으시는 병원이나 약국을 검색해보세요" aria-label="Search"
								style="width: 78%; height: 50px; border-radius: 20px; padding-left: 20px; position: relative;">

							<!-- 돋보기 아이콘 -->
							<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50"
								fill="rgb(255,255,255)"
								style="position: relative; top: -50px; left: 300px;"
								class="bi bi-search" viewBox="0 0 16 16">
  								<path
									d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
							</svg>
						</form>

						<nav aria-label="breadcrumb">
							<ol class="breadcrumb justify-content-center">
							</ol>
						</nav>
					</div>
				</div>
			</div>
		</div>

<!--   public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication auth)
         throws IOException, ServletException {

      // 세션에 필요한 값 담기
      UserMemberVO userMemVO = (UserMemberVO) auth.getPrincipal();

      HttpSession session = request.getSession();
      session.setAttribute("userId", userMemVO.getUserId()); // 아이디
      session.setAttribute("userGrade", userMemVO.getGrade()); // 권한
      session.setAttribute("userName", userMemVO.getName()); // 이름
 -->



		<!-- Team Start -->
		<div class="container-xxl py-5" style="padding-top:10px;">
			<div class="container">
				<div style="text-align:center; margin-bottom: 50px;">
				<h5 class="mb-5" style=" color:gray; display:inline; margin-right:20px;" id="location"></h5>
				<button class="btn btn-warning rounded-pill px-3" type="button" onclick="switchLocation()">현재위치변경</button>
				</div>

				<!--1. 내 현재 좌표(위치)찾기(geolocation) -->
				<script th:inline="javascript">
					//방법 = navigator.geolocation.getCurrentPosition(success, error, [options])
					function getLocation() {
						if (navigator.geolocation) {
							navigator.geolocation.getCurrentPosition(
								function(position) {
									//위도(y):latitude 경도(x):longitude
									let curLat = position.coords.latitude
									let curLon = position.coords.longitude
									console.log("curLat=", curLat);
									console.log("curLon=", curLon);
									
									/* HttpSession session = request.getSession();
								    session.setAttribute("curLat", curLat); // 위도
								    session.setAttribute("curLon", curLon); // 경도 */

									<!--2. 현재 내위치 좌표로 주소를 찾고 화면에 띄어주기(kakao지도 api라이브러리) -->
									//x Number : x 좌표, 경위도인 경우 longitude
									//y Number : y 좌표, 경위도인 경우 latitude
									var geocoder = new kakao.maps.services.Geocoder();
									var coord = new kakao.maps.LatLng(curLat, curLon);
									var callback = function(result, status) {
										if (status === kakao.maps.services.Status.OK) {
											console.log('현재위치는 = '+ result[0].address.address_name);
											//h3안에 입력해줌
											document.getElementById("location").innerText = '현재 내 위치 : ' + result[0].address.address_name;
										}
									};
									geocoder.coord2Address(coord.getLng(), coord.getLat(), callback);
								}, function(error) {
									console.log(error.message);
								});
						} else {
							ALERT('GPS 허용을 눌러주세요');
						}
					}
					getLocation();
					
					//3. 내 현재 주소를 daum 주소api로 바꾸기(daum주소 api)
					function switchLocation(){
						    new daum.Postcode({
						        oncomplete: function(data) {
						        	console.log(data.address);
						        	document.getElementById("location").innerText = '현재 내 위치 : ' + data.address;
						        	
						        	<!--4. 바뀐 내 주소로 새 좌표찾기(kakao지도 api라이브러리) -->
						        	var geocoder = new kakao.maps.services.Geocoder();

						        	var callback = function(result, status) {
						        	    if (status === kakao.maps.services.Status.OK) {
						        	        console.log('바뀐주소Lat = ',result[0].address.y);
						        	        console.log('바뀐주소Lon = ',result[0].address.x);
						        	    }
						        	};
						        	geocoder.addressSearch(data.address, callback);
						        }
						    }).open();
						
					}
					
				</script>


				<div class="text-center wow fadeInUp" data-wow-delay="0.1s">
					<h6 class="section-title bg-white text-center text-primary px-3">내주변</h6>
					<h1 class="mb-5" style="margin-top: 5px;">Hospital</h1>
				</div>
				<div class="row g-4">
					<th:block th:each="hos: ${hosList}">
						<!-- <p th:text="${hos.phone}"></p>
						<p th:text="${hos.hospitalId}"></p>
						<p th:text="${hos.hospitalName}"></p>
						<p th:text="${hos.hospitalImg}"></p>
						<p th:text="${hos.closetime}"></p>
						<p th:text="${hos.address}"></p> -->
						<div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
							<div class="team-item bg-light">
								<div class="overflow-hidden">
									<!-- <img class="img-fluid" src="<c:url value="resources/images/${hos.hospitalImg}"/>"> alt=""> -->
								</div>
							</div>
							<div class="text-center p-4">
								<h5 class="mb-0" th:text="${hos.hospitalName}"></h5>
								<small th:text="${hos.phone}"></small> <br /> <small
									style="color: red; font-weight: bold;">거리넣을곳</small>
							</div>
						</div>
					</th:block>
				</div>
			</div>
		</div>

		<!-- Team End -->


		<!-- Testimonial Start -->
		<!--  <div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
		        <div class="container">
		            <div class="text-center">
		                <h6 class="section-title bg-white text-center text-primary px-3">내 주변</h6>
		                <h1 class="mb-5">Pharmacy</h1>
		            </div>
		            <div class="owl-carousel testimonial-carousel position-relative">
		                <div class="testimonial-item text-center">
		                    <img class="border rounded-circle p-2 mx-auto mb-3" src="img/testimonial-1.jpg" style="width: 80px; height: 80px;">
		                    <h5 class="mb-0">Client Name</h5>
		                    <p>Profession</p>
		                    <div class="testimonial-text bg-light text-center p-4">
		                    <p class="mb-0">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit diam amet diam et eos. Clita erat ipsum et lorem et sit.</p>
		                    </div>
		                </div>
		                <div class="testimonial-item text-center">
		                    <img class="border rounded-circle p-2 mx-auto mb-3" src="img/testimonial-2.jpg" style="width: 80px; height: 80px;">
		                    <h5 class="mb-0">Client Name</h5>
		                    <p>Profession</p>
		                    <div class="testimonial-text bg-light text-center p-4">
		                    <p class="mb-0">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit diam amet diam et eos. Clita erat ipsum et lorem et sit.</p>
		                    </div>
		                </div>
		                <div class="testimonial-item text-center">
		                    <img class="border rounded-circle p-2 mx-auto mb-3" src="img/testimonial-3.jpg" style="width: 80px; height: 80px;">
		                    <h5 class="mb-0">Client Name</h5>
		                    <p>Profession</p>
		                    <div class="testimonial-text bg-light text-center p-4">
		                    <p class="mb-0">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit diam amet diam et eos. Clita erat ipsum et lorem et sit.</p>
		                    </div>
		                </div>
		                <div class="testimonial-item text-center">
		                    <img class="border rounded-circle p-2 mx-auto mb-3" src="img/testimonial-4.jpg" style="width: 80px; height: 80px;">
		                    <h5 class="mb-0">Client Name</h5>
		                    <p>Profession</p>
		                    <div class="testimonial-text bg-light text-center p-4">
		                    <p class="mb-0">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit diam amet diam et eos. Clita erat ipsum et lorem et sit.</p>
		                    </div>
		                </div>
		            </div>
		        </div>
		    </div> -->
		<!-- Testimonial End -->
	</div>
</body>
</html>
